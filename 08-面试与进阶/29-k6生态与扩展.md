# 第29章：k6 生态与扩展

## 29.1 k6 官方扩展

### k6 扩展列表

- **k6/ws**：WebSocket 支持
- **k6/net/grpc**：gRPC 支持
- **k6/data**：数据驱动支持
- **k6/metrics**：自定义指标

### 使用官方扩展

```javascript
import ws from 'k6/ws';
import grpc from 'k6/net/grpc';
import { SharedArray } from 'k6/data';
import { Counter, Rate, Trend } from 'k6/metrics';
```

## 29.2 第三方扩展

### jslib.k6.io

k6 官方维护的 JavaScript 库集合：

- **papaparse**：CSV 解析
- **k6-utils**：工具函数库
- **k6-prometheus**：Prometheus 输出

### 使用第三方库

```javascript
import papaparse from 'https://jslib.k6.io/papaparse/5.1.1/index.js';
import { randomItem, randomString } from 'https://jslib.k6.io/k6-utils/1.2.0/index.js';

const csvData = papaparse.parse(open('./data.csv'), { header: true }).data;
const randomName = randomItem(['Alice', 'Bob', 'Charlie']);
```

## 29.3 JavaScript 库使用

### npm 包支持

通过 jslib.k6.io 可以使用 npm 包：

```javascript
// 使用 lodash
import _ from 'https://jslib.k6.io/k6-utils/1.2.0/index.js';

const array = [1, 2, 3, 4, 5];
const shuffled = _.shuffle(array);
```

## 29.4 社区资源

### 官方资源

- **GitHub**：https://github.com/grafana/k6
- **文档**：https://grafana.com/docs/k6/latest/
- **Slack**：https://k6.io/slack
- **示例**：https://github.com/grafana/k6-docs

### 社区贡献

- **示例脚本**：GitHub 上的示例仓库
- **扩展开发**：社区开发的扩展
- **最佳实践**：社区分享的经验

## 29.5 贡献指南

### 如何贡献

1. **报告问题**：GitHub Issues
2. **提交 PR**：改进文档或代码
3. **分享案例**：分享使用经验
4. **开发扩展**：开发有用的扩展

### 贡献流程

```bash
# 1. Fork 仓库
# 2. 创建分支
git checkout -b feature/new-feature

# 3. 提交更改
git commit -m "Add new feature"

# 4. 推送并创建 PR
git push origin feature/new-feature
```

## 29.6 总结

k6 生态与扩展：

✅ **官方扩展**：丰富的官方扩展支持  
✅ **第三方库**：jslib.k6.io 提供常用库  
✅ **社区资源**：活跃的社区支持  
✅ **贡献指南**：欢迎社区贡献  

参与 k6 生态，共同推动工具发展！

---

**下一章**：[第30章：未来展望](./30-未来展望.md)

